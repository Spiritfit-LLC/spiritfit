window.onload = function () {
    function e() {
        $(".page-wrapper > main").hasClass("fixed") ? $(".page-wrapper").addClass("fixed") : $(".page-wrapper").removeClass("fixed")
    }

    function t() {
        $(window).innerWidth() < 1260 ? $(".application__top-buttons").insertAfter(".application__heading") : $(".application__top-buttons").insertAfter(".application__top-type")
    }

    function i(e, t, i) {
        i === t.$slides.length - 1 ? (t.$prevArrow.fadeIn(300), t.$nextArrow.fadeOut(300)) : (0 === i ? t.$prevArrow.fadeOut(300) : t.$prevArrow.fadeIn(300), t.$nextArrow.fadeIn(300))
    }

    function a() {
        $(window).innerWidth() < 1260 ? ($(".club__subheading .btn").insertAfter(".video")) : ($(".club > .btn").appendTo(".club__subheading--tour"))
    }

    function n() {
        $(window).innerWidth() < 768 ? $(".grid-element--aside-small").length && !$(".grid__aside").hasClass("slick-slider") && $(".grid__aside").slick({
            centerMode: !0,
            slidesToShow: 1,
            centerPadding: "22px",
            infinite: !1
        }) : $(".grid__aside.slick-slider").length && $(".grid__aside.slick-slider").slick("unslick")
    }

    function s() {
        $(window).innerWidth() < 1261 ? $(".product__top-buttons").insertAfter(".product__heading") : $(".product__top-buttons").insertAfter(".product__top-num")
    }

    function o() {
        $(window).innerWidth() < 1260 ? $(".subscription__aside").next().is($(".subscription__subheading")) || ($(".subscription__aside").insertAfter(".subscription__label"), $(".subscription__ready").insertAfter(".subscription__title:eq(0)")) : $(".subscription__aside").next().is($(".subscription__subheading")) && ($(".subscription__aside").insertAfter(".subscription__main"), $(".subscription__ready").insertAfter(".subscription__common"))
    }

    function r() {
        $(".timetable__container.ps .ps__rail-x--top .ps__thumb-x").css("width", $(".timetable__container.ps .ps__rail-x:not(.ps__rail-x--top) .ps__thumb-x").css("width")), $(".timetable__container.ps").on("scroll", function () {
            var e = $(this),
                t = e.find(".ps__rail-x").not(".ps__rail-x--top").css("left"),
                i = e.find(".ps__rail-x:not(.ps__rail-x--top) .ps__thumb-x").css("left");
            e.find(".ps__rail-x--top").css("left", t), e.find(".ps__rail-x--top .ps__thumb-x").css("left", i)
        })
    }

    function l() {
        $(".timetable__container.ps").on("scroll", function () {
            var e = $(this);
            scrollWidth = e.get(0).scrollWidth, scrollLeft = e.scrollLeft(), innerWidth = e.innerWidth(), 0 < e.scrollLeft() ? ($(".timetable__arrows-item--left").removeClass("timetable__arrows-item--disabled"), $(".timetable__table-less").fadeIn(300)) : ($(".timetable__arrows-item--left").addClass("timetable__arrows-item--disabled"), $(".timetable__table-less").fadeOut(300)), scrollWidth - scrollLeft > innerWidth ? ($(".timetable__arrows-item--right").removeClass("timetable__arrows-item--disabled"), $(".timetable__table-more").fadeIn(300)) : ($(".timetable__arrows-item--right").addClass("timetable__arrows-item--disabled"), $(".timetable__table-more").fadeOut(300))
        })
    }
    if ($(document).ready(function () {
            0 < $(".page-wrapper--animation").length && ($(".page-wrapper--animation").fadeIn(1e3), $('.header__nav-link[href="products.html"], .header__logo').on("click", function (e) {
                var t = void 0;
                e.preventDefault(), $(".grid").each(function () {
                    $(this).is(":visible") || (t = $(this))
                }), $(".grid").fadeOut(500), setTimeout(function () {
                    t.fadeIn(500)
                }, 500), "products.html" === $(this).attr("href") ? $(this).addClass("header__nav-link--active") : $(this).hasClass("header__logo") && $('.header__nav-link[href="products.html"]').removeClass("header__nav-link--active")
            }))
        }), $(window).ready(function () {
            e()
        }), $(window).on("hashchange", function () {
            e()
        }), !!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) || true, $(".input--checkbox").styler(), $(".input--tel").inputmask({
            'mask': '+7 (999) 999-99-99',
            onBeforeMask: function (value, opts) {
                if (value[0] == '8') {
                    var processedValue = value.replace('8', "");
                }
                
                return processedValue;
            }
        }), $('select.custom--select').select2({
            minimumResultsForSearch: Infinity
        }),$(".input--num").on("input", function () {
            this.value = this.value.replace(/[^0-9]/gi, "")
        }), $(".input--name").on("input", function () {
            this.value = this.value.replace(/[^Н-Яа-ѝA-Za-z]/gi, "")
        }), $(".jq-selectbox li").one("click", function () {
            $(this).closest(".jq-selectbox").css("color", "#000").find(".jq-selectbox__select-text").css("opacity", "1")
        }), $(".application__possibilities").on("init", function (e, t) {
            t.$prevArrow.hide(0)
        }), $(".application__possibilities").slick({
            dots: !0,
            infinite: !1,
            slidesToShow: 1,
            centerMode: !0,
            centerPadding: "160px",
            touchThreshold: 50
        }), $(".application__possibilities").on("afterChange", function (e, t, a) {
            i(0, t, a)
        }), t(), $(window).on("resize", function () {
            t()
        }), $(".club__slider").on("init", function (event, slick) {
            var dataSrc = $(slick.$slides[0]).attr("data-src")
            $(slick.$slides[0]).css('background-image', 'url('+dataSrc+')')
        }), $(".club__slider").slick({
            dots: !0,
            infinite: !1,
            touchThreshold: 50
        }), $(".club__slider").on("afterChange", function (e, t, a) {
            i(0, t, a)
        }),$(".club__slider").on("beforeChange", function (event, slick, currentSlide, nextSlide) {
                var nextX = slick.$slides.eq(nextSlide)
                nextX.prevAll().not('.loaded').each(function(){
                    var dataSrcT = $(this).attr("data-src")
                    $(this).css('background-image', 'url('+dataSrcT+')')
                })
                var dataSrcT = nextX.attr("data-src")
                nextX.css('background-image', 'url('+dataSrcT+')')
            }),$(".club__advantages").on("init", function (event, slick) {
                var $activeSlide = slick.$slider.find('.slick-slide.slick-current');
                var dataSrc1 = $activeSlide.find(".club__advantages-slide-pic-img").attr("data-src")
                $activeSlide.addClass('loaded').find(".club__advantages-slide-pic-img").attr("src", ''+dataSrc1+'')
                var $activeSlideNext = $activeSlide.next()
                var dataSrc2 = $activeSlideNext.find(".club__advantages-slide-pic-img").attr("data-src")
                $activeSlideNext.addClass('loaded').find(".club__advantages-slide-pic-img").attr("src", ''+dataSrc2+'')
        }), $(".club__advantages").slick({
            dots: !0,
            infinite: !1,
            slidesToShow: 1,
            centerMode: !0,
            touchThreshold: 50
        }),$(".club__advantages").on("beforeChange", function (event, slick, currentSlide, nextSlide) {
            var nextC = slick.$slides.eq(nextSlide)
        
            nextC.next().not('.loaded').each(function(){
                    var dataSrcC = $(this).find(".club__advantages-slide-pic-img").attr("data-src")
                    $(this).find(".club__advantages-slide-pic-img").attr("src", ''+dataSrcC+'')
                })
                nextC.prev().not('.loaded').each(function(){
                var dataSrcC = $(this).find(".club__advantages-slide-pic-img").attr("data-src")
                $(this).find(".club__advantages-slide-pic-img").attr("src", ''+dataSrcC+'')
            })
            var dataSrcC = nextC.find(".club__advantages-slide-pic-img").attr("data-src")
            nextC.find(".club__advantages-slide-pic-img").attr("src", ''+dataSrcC+'')
        }), $(".club__team").on("init", function (event, slick, nextSlide) {
            if($(window).width() > 1260) {
                slick.$slides.each(function(){
                    var dataSrcT = $(this).find(".club__team-slide-front").attr("data-src")
                    $(this).find(".club__team-slide-front").css('background-image', 'url('+dataSrcT+')')
                })
            } else {
                slick.$slides.each(function(){
                    var l = $(this).offset().left
                    if(l < window.innerWidth && l > 0){
                        var dataSrcT = $(this).find(".club__team-slide-front").attr("data-src")
                        $(this).addClass('loaded').find(".club__team-slide-front").css('background-image', 'url('+dataSrcT+')')
                    }
                })
            }
        }),
        $('.club__team').slick({
            dots: !0,
            infinite: !1,
            slidesToShow: 1,
            centerMode: !0,
            variableWidth: true,
            centerMode: false,
            touchThreshold: 50
        }), $(".club__team").on("afterChange", function (e, t, a) {
            i(0, t, a)
        }), $(".club__team").on("beforeChange", function (event, slick, currentSlide, nextSlide) {
            var next = slick.$slides.eq(nextSlide)
                    next.prevAll().not('.loaded').each(function(){
                var dataSrcT = $(this).find(".club__team-slide-front").attr("data-src")
                $(this).find(".club__team-slide-front").css('background-image', 'url('+dataSrcT+')')
            })
            var j = slick.$slides.filter(function(){
                var l = $(this).offset().left
                return l > 0 && l < window.innerWidth
            }).length;
            for (var i=0; i<=j; i++){
                var el = slick.$slides.eq(nextSlide + i)
                if(!!el){
                    var dataSrcT = el.find(".club__team-slide-front").attr("data-src")
                    el.addClass('loaded').find(".club__team-slide-front").css('background-image', 'url('+dataSrcT+')')
                }
            }
        }), a(), $(window).on("resize", function () {
            a()
        }), n(), $(window).on("resize", function () {
            n()
        }), $(".header__burger").length && (timerBurger = 0, $(".header__burger").on("click", function () {
            clearTimeout(timerBurger), $(this).toggleClass("header__burger--active"), $(this).hasClass("header__burger--active") ? ($(".page-wrapper main, .footer").stop().fadeOut(400), $('.js-slider__stock.slick-slider').slick('slickSetOption', "autoplay", !1, !0), timerBurger = setTimeout(function () {
                $(".header__nav").stop().slideDown({
                    start: function () {
                        $(this).css({
                            display: "flex"
                        })
                    }
                })
            }, 200)) : ($(".header__nav").stop().slideUp(400), timerBurger = setTimeout(function () {
                $(".page-wrapper main, .footer").stop().fadeIn(300);
                $('.js-slider__stock.slick-slider').slick('slickSetOption', "autoplay", !0, !0)
            }, 250))
        })), $(".footer__btn, .header__nav-footer-btn").on("click", function (e) {
            e.preventDefault(), $(".popup--call").fadeIn(300), $(window).innerWidth() < 1260 && $(".page-wrapper main, .footer").fadeOut(400)
        }), $(".video").on("click", function () {
            $(".popup--video").fadeIn(300)
        }), $(document).on('keydown', function(event) {
            if (event.key == "Escape") {
                $('.popup__close:visible').trigger('click');
            }
        }), $(".popup__close, .popup__bg").on("click", function () {
            $(this).closest(".popup").fadeOut(400), $(window).innerWidth() < 1260 && ($(".header__burger--active").removeClass("header__burger--active"), $(".header__nav").hide(), $(".page-wrapper main, .footer").fadeIn(400));
        }), $(".product__slider-inner").slick({
            dots: !0,
            arrows: !1,
            adaptiveHeight: !1
        }), s(), $(window).on("resize", function () {
            s()
        }), $(".subscription__total-btn").on("click", function () {
            var e = $(this).attr("data-stage"),
                t = !0;
            1 == +e ? ($('.subscription__aside-stage[data-stage="1"] input[required]').each(function () {
                "" === $(this).val() && (t = !1);
            }), $('.subscription__aside-stage[data-stage="1"] div.input--checkbox').each(function () {
                $(this).hasClass("checked") || (t = !1)
            }), !$('.subscription__aside-stage[data-stage="1"] .subscription__aside-form-row .jq-selectbox li.disabled').hasClass("selected") && t && ($('.subscription__stage-item[data-stage="2').addClass("subscription__stage-item--done"), $('.subscription__aside-stage[data-stage="1"]').fadeOut(300).parent().find('.subscription__aside-stage[data-stage="2"]').fadeIn(300))) : 2 == +e && ($('.subscription__aside-stage[data-stage="2"] .input--num').each(function () {
                "" === $(this).val() && (t = !1)
            }), t && ($('.subscription__stage-item[data-stage="3"]').addClass("subscription__stage-item--done"), $('.subscription__aside-stage[data-stage="2"]').fadeOut(300).parent().find('.subscription__aside-stage[data-stage="3"]').delay(300).fadeIn(300), setTimeout(function () {
                $(".subscription__ready").fadeIn(300)
            }, 300), 1260 < $(window).innerWidth() ? $(".subscription__common").fadeOut(300) : $(".subscription__common > .subscription__desc, .subscription__label").fadeOut(300)))
        }), $(".input--num").on("keyup", function (evt) {
            if (evt.target.value > 1) {
                this.value = evt.target.value.slice(0, 1)
            }
            if (evt.target.value !== '') {
                $(this).next('.input--num').focus();
            }
            if (evt.key === 'Backspace') {
                $(this).prev('.input--num').focus();
            }
        }), o(), $(window).on("resize", function () {
            o()
        }),
        $(".timetable__container.timetable__container-active").length) var _ = new PerfectScrollbar(".timetable__container.timetable__container-active");
        $('select.timetable__filter-dept').addClass('remove-events');
        $('select.timetable__filter-dept').each(function(){
            if (!$(this).parent().is('.jq-selectbox')) {
                !!navigator.platform.match(/(Mac|iPhone|iPod|iPad|Pike)/i) || $(this).styler({
                    selectSmartPositioning: !1
                })
            }
        }),
        $("select.timetable__filter-dept").on("change", function() {
            var e = '',
                t = void 0;
            var value = $(this).val()
            $(this).find('option').each(function() {
                if ($(this).text().replace(/\s/g,'') == value.replace(/\s/g,'')) {
                    e = $(this).data('timetable');
                }
            });
            $(this).styler('close');
            $(".timetable__container").each(function() {
                $(this).is(":visible") && (t = $(this))
            }), e !== t.data("timetable") && (t.fadeOut(300), setTimeout(function() {
                $('.timetable__container[data-timetable="' + e + '"]').css("display", "flex").hide().fadeIn()
            }, 300), setTimeout(function() {
                if ($('.timetable__container[data-timetable="' + e + '"]').length > 0) {
                    d = new PerfectScrollbar('.timetable__container[data-timetable="' + e + '"]'), $("ps__rail-x--top").remove(), $(".timetable__container.ps").scrollLeft(0)
                }
            }, 300))
        }),
        $(".timetable__arrows-item--right").on("click", function () {
        $(this).hasClass("timetable__arrows-item--disabled") || $(".timetable__container.ps").scrollLeft($(".timetable__container.ps").scrollLeft() + 218)
    }), $(".timetable__arrows-item--left").on("click", function () {
        $(this).hasClass("timetable__arrows-item--disabled") || $(".timetable__container.ps").scrollLeft($(".timetable__container.ps").scrollLeft() - 218)
    }), l();
    var c = !1,
        d = 0;
    $(window).on("mousemove", function (e) {
        !0 === c && $(".timetable__container.ps").scrollLeft($(".timetable__container.ps").scrollLeft() + (d - e.pageX))
    }), $(window).on("mousedown", function (e) {
        $(".timetable__container.ps").addClass("is-grabbing"), c = !0, d = e.pageX
    }), $(window).on("mouseup", function () {
        $(".timetable__container.ps").removeClass("is-grabbing"), c = !1
    });

    clubCardsQuoteHeight();
    $(window).on('resize', clubCardsQuoteHeight);
}

function clubCardsQuoteHeight() {
    $('.club__team').each(function() {
        var $blocks = $(this).find('.club__team-quote');
        $blocks.css('height', '');
        var minH = null;
        $blocks.each(function() {
            var h = $(this).innerHeight();
            if(h < minH || minH == null) minH = h;
        });
        $blocks.css('height', minH);
        $blocks.scrollTop(1);
        $blocks.scrollTop(0);

        var $gifts = $(this).find('.club__team-wrapper-gift');

        $gifts.css('height', '');
        var maxHG = 0;
        $gifts.each(function() {
            var h = $(this).innerHeight();
            if(h > maxHG) maxHG = h;
        });
        $gifts.css('height', maxHG);
    });
    $('.grid__main--subscription').each(function() {
        var $blocks = $(this).find('.subscription__include-wrapper');
        $blocks.css('height', '');
        var maxH = 0;
        $blocks.each(function() {
            var h = $(this).innerHeight();
            if(h > maxH) maxH = h;
        });
        $blocks.css('height', maxH);
        setTimeout(function() {
            $blocks.scrollTop(1);
            $blocks.scrollTop(0);
        }, 0)

        var $titles = $(this).find('.grid-element__title');
        $titles.css('height', '');
        var maxHT = 0;
        $titles.each(function() {
            var h = $(this).innerHeight();
            if(h > maxHT) maxHT = h;
        });
        $titles.css('height', maxHT);

        var $gifts = $(this).find('.subscription__include-wrapper-items--desktop');

        $gifts.css('height', '');
        var maxHG = 0;
        $gifts.each(function() {
            var h = $(this).innerHeight();
            if(h > maxHG) maxHG = h;
        });
        $gifts.css('height', maxHG);

    });
}