window.onload = function() {
    function e() {
        $(".page-wrapper > main").hasClass("fixed") ? $(".page-wrapper").addClass("fixed") : $(".page-wrapper").removeClass("fixed")
    }

    function t() {
        $(window).innerWidth() < 1260 ? $(".application__top-buttons").insertAfter(".application__heading") : $(".application__top-buttons").insertAfter(".application__top-type")
    }

    function a(e, t, i) {
        i === t.$slides.length - 1 ? (t.$prevArrow.fadeIn(300), t.$nextArrow.fadeOut(300)) : (0 === i ? t.$prevArrow.fadeOut(300) : t.$prevArrow.fadeIn(300), t.$nextArrow.fadeIn(300))
    }

    function i() {
        $(window).innerWidth() < 1260 ? ($(".club__desc .btn").insertAfter(".club__heading"), $(".club__subheading .btn").insertAfter(".video")) : ($(".club__desc .btn").insertAfter(".club__desc-inner"), $(".club > .btn").appendTo(".club__subheading--tour"))
    }

    function n() {
        $(window).innerWidth() < 768 ? $(".grid-element--aside-small").length && !$(".grid__aside").hasClass("slick-slider") && $(".grid__aside").slick({
            centerMode: !0,
            slidesToShow: 1,
            centerPadding: "22px",
            infinite: !1
        }) : $(".grid__aside.slick-slider").length && $(".grid__aside").slick("unslick")
    }

    function s() {
        $(window).innerWidth() < 1261 ? $(".product__top-buttons").insertAfter(".product__heading") : $(".product__top-buttons").insertAfter(".product__top-num")
    }

    function o() {
        $(window).innerWidth() < 1260 ? $(".subscription__aside").next().is($(".subscription__subheading")) || ($(".subscription__aside").insertAfter(".subscription__label"), $(".subscription__ready").insertAfter(".subscription__title:eq(0)")) : $(".subscription__aside").next().is($(".subscription__subheading")) && ($(".subscription__aside").insertAfter(".subscription__main"), $(".subscription__ready").insertAfter(".subscription__common"))
    }
    $(document).ready(function() {
        0 < $(".page-wrapper--animation").length && ($(".page-wrapper--animation").fadeIn(1e3), $('.header__nav-link[href="products.html"], .header__logo').on("click", function(e) {
            var t = void 0;
            e.preventDefault(), $(".grid").each(function() {
                $(this).is(":visible") || (t = $(this))
            }), $(".grid").fadeOut(500), setTimeout(function() {
                t.fadeIn(500)
            }, 500), "products.html" === $(this).attr("href") ? $(this).addClass("header__nav-link--active") : $(this).hasClass("header__logo") && $('.header__nav-link[href="products.html"]').removeClass("header__nav-link--active")
        }))
    }), $(window).ready(function() {
        e()
    }), $(window).on("hashchange", function() {
        e()
    }), !!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) || $(".input--select").styler({
        selectSmartPositioning: !1
    }), $(".input--checkbox").styler(), $(".input--tel").mask("+7 (999) 999-99-99"), $(".input--num").on("input", function() {
        this.value = this.value.replace(/[^0-9]/gi, "")
    }), $(".input--name").on("input", function() {
        this.value = this.value.replace(/[^А-Яа-яA-Za-z]/gi, "")
    }), $(".jq-selectbox li").one("click", function() {
        $(this).closest(".jq-selectbox").css("color", "#000").find(".jq-selectbox__select-text").css("opacity", "1")
    }), $(".application__possibilities").on("init", function(e, t) {
        t.$prevArrow.hide(0)
    }), $(".application__possibilities").slick({
        dots: !0,
        infinite: !1,
        slidesToShow: 1,
        centerMode: !0,
        centerPadding: "160px"
    }), $(".application__possibilities").on("afterChange", function(e, t, i) {
        a(e, t, i)
    }), t(), $(window).on("resize", function() {
        t()
    }), $(window).innerWidth() < 768 && ($(".club__team-slide").appendTo(".club__team"), $(".club__team-slide-outer").remove()), $(".club__slider").on("init", function(e, t) {
        t.$prevArrow.hide(0)
    }), $(".club__slider").slick({
        dots: !0,
        infinite: !1
    }), $(".club__slider").on("afterChange", function(e, t, i) {
        a(0, t, i)
    }), $(".club__advantages").slick({
        dots: !0,
        infinite: !0,
        slidesToShow: 1,
        centerMode: !0,
        centerPadding: "160px"
    }), $(".club__team").on("init", function(e, t) {
        t.$prevArrow.hide(0)
    }), $(".club__team").slick({
        dots: !0,
        infinite: !1,
        slidesToShow: 1,
        centerMode: !0,
        centerPadding: "160px"
    }), $(".club__team").on("afterChange", function(e, t, i) {
        a(0, t, i)
    }), i(), $(window).on("resize", function() {
        i()
    }), $("#map").length && ymaps.ready(function() {
        var e = parseFloat($("#map").data("coord-center-lat")),
            t = parseFloat($("#map").data("coord-center-lng")),
            i = parseFloat($("#map").data("coord-mark-lat")),
            a = parseFloat($("#map").data("coord-mark-lng")),
            n = new ymaps.Map("map", {
                center: [e, t],
                zoom: 17,
                controls: []
            }),
            s = new ymaps.Placemark([i, a], {}, {
                iconColor: "#ed1c24"
            });
        n.geoObjects.add(s), n.behaviors.disable("scrollZoom")
    }), n(), $(window).on("resize", function() {
        n()
    }), $(".header__burger").length && $(".header__burger").on("click", function() {
        $(this).toggleClass("header__burger--active"), $(this).hasClass("header__burger--active") ? ($(".page-wrapper main, .footer").fadeOut(400), $(".header__nav").slideDown({
            // start: function() {
            //     $(this).css({
            //         display: "flex"
            //     })
            // }
        })) : ($(".page-wrapper main, .footer").fadeIn(300), $(".header__nav").slideUp(400))
    }), $(".footer__btn, .header__nav-footer-btn").on("click", function(e) {
        e.preventDefault(), $(".popup--call").fadeIn(300), $(window).innerWidth() < 1260 && $(".page-wrapper main, .footer").fadeOut(400)
    }), $(".video").on("click", function(e) {
        e.preventDefault(), $(".popup--video").fadeIn(300)
    }), $(".popup__close, .popup__bg").on("click", function() {
        $(this).closest(".popup").fadeOut(400), $(window).innerWidth() < 1260 && ($(".header__burger--active").removeClass("header__burger--active"), $(".header__nav").hide(), $(".page-wrapper main, .footer").fadeIn(400));
        var e = $(this).closest(".popup").find("iframe");
        if (1 === e.length) {
            var t = e.attr("src");
            e.attr("src", "").attr("src", t)
        }
    }), $(".product__slider-inner").slick({
        dots: !0,
        arrows: !1
    }), s(), $(window).on("resize", function() {
        s()
    }), $(".subscription__total-btn").on("click", function() {
        var e = $(this).attr("data-stage"),
            t = !0;
        1 == +e ? ($('.subscription__aside-stage[data-stage="1"] input[required]').each(function() {
            "" === $(this).val() && (t = !1)
        }), $('.subscription__aside-stage[data-stage="1"] div.input--checkbox').each(function() {
            $(this).hasClass("checked") || (t = !1)
        }), !$('.subscription__aside-stage[data-stage="1"] .subscription__aside-form-row .jq-selectbox li.disabled').hasClass("selected") && t && ($('.subscription__stage-item[data-stage="2').addClass("subscription__stage-item--done"), $('.subscription__aside-stage[data-stage="1"]').fadeOut(300).parent().find('.subscription__aside-stage[data-stage="2"]').fadeIn(300))) : 2 == +e && ($('.subscription__aside-stage[data-stage="2"] .input--num').each(function() {
            "" === $(this).val() && (t = !1)
        }), t && ($('.subscription__stage-item[data-stage="3"]').addClass("subscription__stage-item--done"), $('.subscription__aside-stage[data-stage="2"]').fadeOut(300).parent().find('.subscription__aside-stage[data-stage="3"]').delay(300).fadeIn(300), setTimeout(function() {
            $(".subscription__ready").fadeIn(300)
        }, 300), 1260 < $(window).innerWidth() ? $(".subscription__common").fadeOut(300) : $(".subscription__common > .subscription__desc, .subscription__label").fadeOut(300)))
    }), $(".input--num").on("keyup", function() {
        0 < $(this).val().length && $(this).next(".input--num").focus()
    }), o(), $(window).on("resize", function() {
        o()
    });
    var r = $(window).innerWidth() < 1260 || 1260 < $(window).innerWidth() && $(window).innerWidth() / $(window).innerHeight() >= 76 / 35;

    function _() {
        r ? $(".faq__aside-buttons").appendTo(".faq__main-title") : $(".faq__aside-buttons").appendTo(".faq__aside-heading")
    }
    $(".faq__block-title").on("click", function() {
        $(".faq__block-title").next().slideUp(300), $(this).next().is(":visible") || $(this).next().slideDown(300)
    }), $(".faq__aside-btn").on("click", function() {
        if ($(this).hasClass("faq__aside-btn--active")) r && $(".faq__aside-btn").each(function() {
            $(this).hasClass("faq__aside-btn--active") || $(this).toggle(0)
        });
        else {
            var e = $(this).data("faq");
            $(".faq__aside-btn--active").removeClass("faq__aside-btn--active"), $(this).addClass("faq__aside-btn--active"), r && $(".faq__aside-btn").each(function() {
                $(this).hasClass("faq__aside-btn--active") || $(this).hide(0)
            }), $(".faq__main-content").fadeOut(300), $(".faq__main-content[data-faq=" + e + "]").fadeIn(300), r && $(".faq__aside-btn--active").prependTo(".faq__aside-buttons\t")
        }
    }), $(".faq__aside-buttons-caret").on("click", function() {
        $(".faq__aside-btn").toggle(0), $(".faq__aside-btn--active").show(0)
    }), _(), $(window).on("resize", function() {
        _()
    });
    var d = new PerfectScrollbar(".timetable__container");

    function l() {
        $(".timetable__container.ps .ps__rail-x--top .ps__thumb-x").css("width", $(".timetable__container.ps .ps__rail-x:not(.ps__rail-x--top) .ps__thumb-x").css("width")), $(".timetable__container.ps").on("scroll", function() {
            var e = $(this),
                t = e.find(".ps__rail-x").not(".ps__rail-x--top").css("left"),
                i = e.find(".ps__rail-x:not(.ps__rail-x--top) .ps__thumb-x").css("left");
            e.find(".ps__rail-x--top").css("left", t), e.find(".ps__rail-x--top .ps__thumb-x").css("left", i)
        })
    }

    function c() {
        $(".timetable__container.ps").on("scroll", function() {
            var e = $(this);
            scrollWidth = e.get(0).scrollWidth, scrollLeft = e.scrollLeft(), innerWidth = e.innerWidth(), 0 < e.scrollLeft() ? ($(".timetable__arrows-item--left").removeClass("timetable__arrows-item--disabled"), $(".timetable__table-less").fadeIn(300)) : ($(".timetable__arrows-item--left").addClass("timetable__arrows-item--disabled"), $(".timetable__table-less").fadeOut(300)), scrollWidth - scrollLeft > innerWidth ? ($(".timetable__arrows-item--right").removeClass("timetable__arrows-item--disabled"), $(".timetable__table-more").fadeIn(300)) : ($(".timetable__arrows-item--right").addClass("timetable__arrows-item--disabled"), $(".timetable__table-more").fadeOut(300))
        })
    }
    $(".ps__rail-x").clone().addClass("ps__rail-x--top").appendTo(".timetable__container"), l(), $(".timetable__filter-dept .jq-selectbox__dropdown li").on("click", function() {
        var e = $(this).data("timetable"),
            t = void 0;
        $(".timetable__container").each(function() {
            $(this).is(":visible") && (t = $(this))
        }), e !== t.data("timetable") && (t.fadeOut(300), d.destroy(), d = null, setTimeout(function() {
			$(".timetable__container[data-timetable=" + e + "]")
			// .css("display", "flex")
			.hide().fadeIn()
        }, 300), setTimeout(function() {
            d = new PerfectScrollbar('.timetable__container[data-timetable="' + e + '"]'), $("ps__rail-x--top").remove(), c(), l(), $(".timetable__container.ps").scroll()
        }, 300))
    }), $(".timetable__arrows-item--right").on("click", function() {
        $(this).hasClass("timetable__arrows-item--disabled") || $(".timetable__container.ps").scrollLeft($(".timetable__container.ps").scrollLeft() + 218)
    }), $(".timetable__arrows-item--left").on("click", function() {
        $(this).hasClass("timetable__arrows-item--disabled") || $(".timetable__container.ps").scrollLeft($(".timetable__container.ps").scrollLeft() - 218)
    }), c();
    var p = !1,
        u = 0;
    $(window).on("mousemove", function(e) {
        !0 === p && $(".timetable__container.ps").scrollLeft($(".timetable__container.ps").scrollLeft() + (u - e.pageX))
    }), $(window).on("mousedown", function(e) {
        $(".timetable__container.ps").addClass("is-grabbing"), p = !0, u = e.pageX
    }), $(window).on("mouseup", function() {
        $(".timetable__container.ps").removeClass("is-grabbing"), p = !1
    })
};